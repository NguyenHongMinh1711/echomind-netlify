import{u as J,j as e,B as d,b as o,g as w,q as L,s as S,t as I,S as k,M as n,a as M,P as O,G as _,d as G,e as V,D as q,f as P,n as T,E as R,v as K,w as U,x as Y,y as Q,i as W,z as X,N as z,H as Z,J as $,K as ee,O as te}from"./mui-CFDhWL5c.js";import{a as r}from"./vendor-zWPymlFl.js";import{u as ae}from"./index-DnHAAhUv.js";import{M as ne}from"./MainLayout-B2T8W_MF.js";import"./supabase-DTcxSDRM.js";const ue=()=>{const{supabase:re,session:se}=ae();J();const[m,c]=r.useState([]),[p,s]=r.useState(!1),[F,b]=r.useState(!1),[u,C]=r.useState(null),[l,y]=r.useState(""),[i,j]=r.useState(""),[f,g]=r.useState("neutral"),[h,N]=r.useState("all");r.useEffect(()=>{(async()=>{try{s(!0),console.log("Loading journal entries...");const a=[{id:"1",title:"First Journal Entry",content:"This is a sample journal entry to demonstrate the UI. I felt pretty good today after going for a walk in the park and meeting a friend for coffee. These small activities really helped improve my mood.",mood:"happy",created_at:new Date(Date.now()-864e5)},{id:"2",title:"Feeling Down Today",content:"Today was challenging. I struggled with motivation and found it hard to focus on my tasks. I think I need to be more gentle with myself and remember that progress isn't always linear.",mood:"sad",created_at:new Date(Date.now()-1728e5)},{id:"3",title:"Mixed Emotions",content:"I had both ups and downs today. Started with anxiety about my upcoming presentation, but after practicing it went much better than expected. Reminder to self: most things aren't as scary as they seem beforehand.",mood:"neutral",created_at:new Date(Date.now()-2592e5)},{id:"4",title:"Great Achievement",content:"I finally completed that project I've been working on for weeks! The sense of accomplishment is amazing. I should celebrate these victories more often, even the small ones.",mood:"very_happy",created_at:new Date(Date.now()-3456e5)}];console.log("Setting journal entries:",a),c(a)}catch(a){console.error("Error loading journal entries:",a)}finally{s(!1)}})()},[]);const D=(t=null)=>{t?(C(t),y(t.title),j(t.content),g(t.mood)):(C(null),y(""),j(""),g("neutral")),b(!0)},v=()=>{b(!1)},A=async()=>{if(!(!l.trim()||!i.trim()))try{if(s(!0),u){const t={...u,title:l,content:i,mood:f};c(a=>a.map(x=>x.id===u.id?t:x))}else{const t={id:Date.now().toString(),title:l,content:i,mood:f,created_at:new Date};c(a=>[t,...a])}v()}catch(t){console.error("Error saving journal entry:",t)}finally{s(!1)}},B=async t=>{if(window.confirm("Are you sure you want to delete this journal entry?"))try{s(!0),c(a=>a.filter(x=>x.id!==t))}catch(a){console.error("Error deleting journal entry:",a)}finally{s(!1)}},H=t=>{switch(t){case"very_happy":return e.jsx(te,{color:"success"});case"happy":return e.jsx(ee,{color:"success"});case"neutral":return e.jsx(z,{color:"info"});case"sad":return e.jsx($,{color:"warning"});case"very_sad":return e.jsx(Z,{color:"error"});default:return e.jsx(z,{})}},E=h==="all"?m:m.filter(t=>t.mood===h);return e.jsx(ne,{children:e.jsxs(d,{children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(o,{variant:"h4",component:"h1",children:"Journal"}),e.jsx(w,{variant:"contained",color:"primary",startIcon:e.jsx(L,{}),onClick:()=>D(),children:"New Entry"})]}),e.jsx(o,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Record your thoughts and track your mood over time."}),e.jsx(d,{sx:{mb:3},children:e.jsxs(S,{variant:"outlined",size:"small",sx:{minWidth:200},children:[e.jsx(I,{children:"Filter by Mood"}),e.jsxs(k,{value:h,onChange:t=>N(t.target.value),label:"Filter by Mood",children:[e.jsx(n,{value:"all",children:"All Entries"}),e.jsx(n,{value:"very_happy",children:"Very Happy"}),e.jsx(n,{value:"happy",children:"Happy"}),e.jsx(n,{value:"neutral",children:"Neutral"}),e.jsx(n,{value:"sad",children:"Sad"}),e.jsx(n,{value:"very_sad",children:"Very Sad"})]})]})}),p&&m.length===0?e.jsx(d,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(M,{})}):E.length===0?e.jsx(O,{sx:{p:3,textAlign:"center"},children:e.jsx(o,{variant:"body1",children:h==="all"?"No journal entries yet. Create your first entry!":"No entries found with the selected mood filter."})}):e.jsx(_,{container:!0,spacing:3,children:E.map(t=>e.jsx(_,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(G,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[e.jsxs(V,{sx:{flexGrow:1},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(o,{variant:"h6",component:"h2",noWrap:!0,children:t.title}),H(t.mood)]}),e.jsx(o,{variant:"caption",color:"text.secondary",component:"p",children:t.created_at.toLocaleDateString()}),e.jsx(q,{sx:{my:1}}),e.jsx(o,{variant:"body2",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical"},children:t.content})]}),e.jsxs(P,{children:[e.jsx(T,{size:"small",onClick:()=>D(t),title:"Edit entry",children:e.jsx(R,{fontSize:"small"})}),e.jsx(T,{size:"small",color:"error",onClick:()=>B(t.id),title:"Delete entry",children:e.jsx(K,{fontSize:"small"})})]})]})},t.id))}),e.jsxs(U,{open:F,onClose:v,fullWidth:!0,maxWidth:"md",children:[e.jsx(Y,{children:u?"Edit Journal Entry":"New Journal Entry"}),e.jsxs(Q,{children:[e.jsx(W,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,value:l,onChange:t=>y(t.target.value),required:!0,sx:{mb:2}}),e.jsx(W,{label:"Content",multiline:!0,rows:8,fullWidth:!0,value:i,onChange:t=>j(t.target.value),required:!0,sx:{mb:2}}),e.jsxs(S,{fullWidth:!0,children:[e.jsx(I,{children:"Mood"}),e.jsxs(k,{value:f,onChange:t=>g(t.target.value),label:"Mood",children:[e.jsx(n,{value:"very_happy",children:"Very Happy"}),e.jsx(n,{value:"happy",children:"Happy"}),e.jsx(n,{value:"neutral",children:"Neutral"}),e.jsx(n,{value:"sad",children:"Sad"}),e.jsx(n,{value:"very_sad",children:"Very Sad"})]})]})]}),e.jsxs(X,{children:[e.jsx(w,{onClick:v,children:"Cancel"}),e.jsx(w,{onClick:A,variant:"contained",color:"primary",disabled:!l.trim()||!i.trim()||p,children:p?e.jsx(M,{size:24}):"Save"})]})]})]})})};export{ue as default};
//# sourceMappingURL=Journal-BHh7jGkA.js.map
