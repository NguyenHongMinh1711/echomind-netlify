import{c as n}from"./supabase-DTcxSDRM.js";const i="https://anpmiebatvfzfexxzobr.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFucG1pZWJhdHZmemZleHh6b2JyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTc0NTk5NzcsImV4cCI6MjAzMzAzNTk3N30.Nh0Qs9OYrOWrXyB-XUO9Oe_DwN_-LQPliMFlXEBUo8A",h=i,g=c,t=n(h,g,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"EchoMind/1.0.0"}}}),l={getChatSessions:async()=>{try{const{data:s}=await t.auth.getUser();if(!s)return[];const{data:e,error:r}=await t.from("chat_sessions").select("*").eq("user_id",s.id).order("updated_at",{ascending:!1});if(r)throw console.error("Error fetching chat sessions:",r.message),r;return e||[]}catch(s){throw console.error("Error in getChatSessions:",s.message),s}},getChatSession:async s=>{try{const{data:e,error:r}=await t.from("chat_sessions").select("*").eq("id",s).single();if(r)throw console.error("Error fetching chat session:",r.message),r;return e}catch(e){throw console.error("Error in getChatSession:",e.message),e}},getChatMessages:async s=>{try{const{data:e,error:r}=await t.from("chat_messages").select("*").eq("session_id",s).order("created_at",{ascending:!0});if(r)throw console.error("Error fetching chat messages:",r.message),r;return e||[]}catch(e){throw console.error("Error in getChatMessages:",e.message),e}},createChatSession:async s=>{try{const{data:e}=await t.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:r,error:o}=await t.from("chat_sessions").insert([{...s,user_id:e.id}]).select().single();if(o)throw console.error("Error creating chat session:",o.message),o;return r}catch(e){throw console.error("Error in createChatSession:",e.message),e}},sendMessage:async(s,e)=>{try{const{data:r}=await t.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:o,error:a}=await t.from("chat_messages").insert([{session_id:s,content:e,role:"user",user_id:r.id}]).select().single();if(a)throw console.error("Error sending user message:",a.message),a;return await t.from("chat_sessions").update({last_message:e,updated_at:new Date}).eq("id",s),o}catch(r){throw console.error("Error in sendMessage:",r.message),r}},deleteChatSession:async s=>{try{const{error:e}=await t.from("chat_messages").delete().eq("session_id",s);if(e)throw console.error("Error deleting chat messages:",e.message),e;const{error:r}=await t.from("chat_sessions").delete().eq("id",s);if(r)throw console.error("Error deleting chat session:",r.message),r;return!0}catch(e){throw console.error("Error in deleteChatSession:",e.message),e}}};export{l as c};
//# sourceMappingURL=chatService-RISS4X7f.js.map
