import{u as B,j as e,B as t,b as s,g as h,U as R,ab as H,P as k,a as b,ac as w,i as E,Z as T,G as v,d as W,e as L,a5 as M,D as z,f as A,n as C,v as F,ad as G,ae as Y}from"./mui-CFDhWL5c.js";import{a}from"./vendor-zWPymlFl.js";import{u as N}from"./index-DnHAAhUv.js";import{M as Q}from"./MainLayout-B2T8W_MF.js";import"./supabase-DTcxSDRM.js";const X=()=>{const{supabase:U,session:Z}=N(),I=B(),[m,u]=a.useState(""),[l,p]=a.useState(""),[x,y]=a.useState(!1),[f,c]=a.useState(!1),[i,j]=a.useState(!1),[g,d]=a.useState([]);a.useEffect(()=>{(async()=>{try{c(!0),u("What are three things you are grateful for today?");const o=[{id:"1",prompt:"What is one small step you can take today to improve your mood?",response:"I can take a 15-minute walk outside to get some fresh air and sunlight.",created_at:new Date(Date.now()-864e5),is_bookmarked:!0},{id:"2",prompt:"Describe a moment when you felt proud of yourself recently.",response:"I felt proud when I finished that difficult project at work despite all the challenges.",created_at:new Date(Date.now()-1728e5),is_bookmarked:!1}];d(o)}catch(o){console.error("Error loading prompt data:",o)}finally{c(!1)}})()},[]);const D=async()=>{if(l.trim())try{y(!0);const r={id:Date.now().toString(),prompt:m,response:l,created_at:new Date,is_bookmarked:!1};d(o=>[r,...o]),p(""),j(!0)}catch(r){console.error("Error submitting prompt response:",r)}finally{y(!1)}},S=async()=>{try{c(!0);const r=["What are three things you are grateful for today?","Describe a challenge you are facing and one step you can take to address it.","What is something kind you can do for yourself today?","Reflect on a recent positive interaction you had with someone.","What is one thing you are looking forward to this week?"],o=Math.floor(Math.random()*r.length);u(r[o]),p("")}catch(r){console.error("Error refreshing prompt:",r)}finally{c(!1)}},P=async r=>{try{d(o=>o.map(n=>n.id===r?{...n,is_bookmarked:!n.is_bookmarked}:n))}catch(o){console.error("Error toggling bookmark:",o)}},_=async r=>{if(window.confirm("Are you sure you want to delete this reflection? This action cannot be undone."))try{d(o=>o.filter(n=>n.id!==r))}catch(o){console.error("Error deleting prompt response:",o)}};return e.jsx(Q,{children:e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(s,{variant:"h4",component:"h1",children:"Daily Prompts"}),e.jsxs(t,{children:[e.jsx(h,{variant:i?"outlined":"contained",color:"primary",startIcon:e.jsx(R,{}),onClick:()=>j(!i),sx:{mr:1},children:i?"Hide History":"Show History"}),e.jsx(h,{variant:"outlined",color:"primary",startIcon:e.jsx(H,{}),onClick:S,disabled:f,children:"New Prompt"})]})]}),e.jsx(s,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Respond to daily reflection prompts to practice mindfulness and self-awareness."}),!i&&e.jsx(k,{elevation:3,sx:{p:3,mb:4,backgroundColor:I.palette.mode==="dark"?"rgba(74, 111, 165, 0.1)":"rgba(74, 111, 165, 0.05)"},children:f?e.jsx(t,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(b,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(t,{sx:{display:"flex",mb:2},children:[e.jsx(w,{color:"primary",sx:{mr:1,fontSize:30}}),e.jsx(s,{variant:"h5",component:"h2",gutterBottom:!0,children:m})]}),e.jsx(E,{fullWidth:!0,multiline:!0,rows:6,placeholder:"Type your response here...",value:l,onChange:r=>p(r.target.value),variant:"outlined",sx:{mb:2}}),e.jsx(t,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(h,{variant:"contained",color:"primary",endIcon:x?e.jsx(b,{size:20}):e.jsx(T,{}),onClick:D,disabled:!l.trim()||x,children:"Submit"})})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"h5",component:"h2",gutterBottom:!0,children:"Your Reflection History"}),g.length===0?e.jsx(k,{sx:{p:3,textAlign:"center"},children:e.jsx(s,{variant:"body1",children:"You haven't responded to any prompts yet."})}):e.jsx(v,{container:!0,spacing:3,children:g.map(r=>e.jsx(v,{item:!0,xs:12,children:e.jsxs(W,{elevation:2,children:[e.jsxs(L,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(t,{sx:{display:"flex",mb:1},children:[e.jsx(w,{color:"primary",sx:{mr:1}}),e.jsx(s,{variant:"h6",component:"h3",children:r.prompt})]}),e.jsx(M,{label:r.created_at.toLocaleDateString(),size:"small",variant:"outlined"})]}),e.jsx(z,{sx:{my:1}}),e.jsx(s,{variant:"body1",paragraph:!0,children:r.response})]}),e.jsxs(A,{sx:{justifyContent:"flex-end"},children:[e.jsx(C,{color:"error",onClick:()=>_(r.id),title:"Delete this reflection",children:e.jsx(F,{})}),e.jsx(C,{color:r.is_bookmarked?"primary":"default",onClick:()=>P(r.id),title:r.is_bookmarked?"Remove bookmark":"Bookmark this reflection",children:r.is_bookmarked?e.jsx(G,{}):e.jsx(Y,{})})]})]})},r.id))})]})]})})};export{X as default};
//# sourceMappingURL=Prompts-Th7UicVI.js.map
